"use strict";var vlevelLinkage=function(o,d){var r=[];eosCommon.eosAjax(eosCommon.EOS_COMMON_API+"api/common/organization","GET",{AccessToken:window.parent.eosCommon.storage.get("AccessToken"),Parameters:{Type:"3"}},"json",function(e){if(window.parent.eosCommon.checkCode(e.State,e.Message)){var a={check:{enable:!0},view:{showLine:!1,showIcon:!0,dblClickExpand:!1,selectedMulti:!1},data:{simpleData:{enable:!0}},callback:{onClick:function(e,a,n){$.fn.zTree.getZTreeObj("levelLinkageTree").expandNode(n)},onCheck:function(e,a){var n=$.fn.zTree.getZTreeObj("levelLinkageTree"),i=n.getCheckedNodes(!0),l=n.getCheckedNodes(!1);$("#tree_panel").empty();for(var t=0;t<i.length;t++)3==i[t].levels&&$("#tree_panel").append("<li data-id="+i[t].id+">"+i[t].name+"</li>");for(var o=0;o<l.length;o++)$("#tree_panel li").each(function(){$(this).attr("data-id")==l[o].id&&$(this).remove()})}}};r=e.Data;var n=$("#levelLinkageTree");if($.fn.zTree.init(n,a,r,"RoleMenu"),o){$("#tree_panel").empty();for(var i=$.fn.zTree.getZTreeObj("levelLinkageTree"),l=0;l<o.length;l++){$("#tree_panel").append("<li data-id="+o[l].id+">"+o[l].name+"</li>");var t=i.getNodeByParam("id",o[l].id);i.checkNode(t,!0,!0)}}$("#eosDialogLevelLinkageComfirn").click(function(){for(var e=[],a=0;a<$("#tree_panel li").length;a++)e.push($("#tree_panel li").eq(a).attr("data-id"));d&&d($("#tree_panel").html())})}})},levelLinkageCompontents=function(e,o,d){var r=$(e),c=[];eosCommon.eosAjax(eosCommon.EOS_COMMON_API+"api/common/organization","GET",{AccessToken:window.parent.eosCommon.storage.get("AccessToken"),Parameters:{Type:"3"}},"json",function(e){if(window.parent.eosCommon.checkCode(e.State,e.Message)){var a={check:{enable:!0},view:{showLine:!1,showIcon:!0,dblClickExpand:!1,selectedMulti:!1},data:{simpleData:{enable:!0}},callback:{onClick:function(e,a,n){$.fn.zTree.getZTreeObj(a).expandNode(n)},onCheck:function(e,a,n){var i=$.fn.zTree.getZTreeObj(a),l=i.getCheckedNodes(!0),t=i.getCheckedNodes(!1);$(".tree_panel").empty();for(var o=0;o<l.length;o++)3==l[o].levels&&r.find(".tree_panel").append("<li data-id="+l[o].id+">"+l[o].name+"</li>");for(var d=0;d<t.length;d++)r.find(".tree_panel li").each(function(){$(this).attr("data-id")==t[d].id&&$(this).remove()})}}};c=e.Data;var n=r.find(".levelLinkageTree");if($.fn.zTree.init(n,a,c,"RoleMenu"),o){r.find(".tree_panel").empty();for(var i=$.fn.zTree.getZTreeObj("levelLinkageTree"),l=0;l<o.length;l++){r.find(".tree_panel").append("<li data-id="+o[l].id+">"+o[l].name+"</li>");var t=i.getNodeByParam("id",o[l].id);i.checkNode(t,!0,!0)}}r.find(".comfirn").click(function(){for(var e=[],a=0;a<r.find(".tree_panel li").length;a++)e.push(r.find(".tree_panel li").eq(a).attr("data-id"));d&&d(r.find(".tree_panel").html())})}})},onlyLevelLinkage=function(){$("body").append('<div class="modal fade" id="eosDialogLevelLinkage" tabindex="-1" role="dialog" ><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close cancel" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel">选择抄送人</h4></div><div class="modal-body ak_tree"><div class="level_linkage_box"><div id="main_tree_box" class="main_tree_box"><ul id="levelLinkageTree" class="ztree"></ul></div><div id="tree_panel_box"  class="tree_panel_box"><ul id="tree_panel"></ul></div></div></div><div class="modal-footer"><button type="button" class="btn cancel" data-dismiss="modal" aria-hidden="true">取消</button><button id="eosDialogLevelLinkageComfirn" type="button" class="btn btn-primary">确认选择</button></div></div></div></div>'),$("#eosDialogLevelLinkage").modal({backdrop:!1}),window.parent.eosCommon.eosAjax("http://192.168.1.90:8081/api/common/employee","GET",{AccessToken:"x9KDsw@6OGRvyS3@2pWQoI@Yi7z2d9grVdX4QcoCry28PhiO0nBCysfsAwq2le@F//Hdkc9Y0nbsKKa@U/u8egWyRPb7A1oqBIPci/kPJCg=",PageIndex:0,PageSize:0,Parameters:{EmployeeNo:"",EmployeeName:""}},"json",function(e){if(window.parent.eosCommon.checkCode(e.State,e.Message)){$("#main_tree_box").niceScroll(),$("#tree_panel_box").niceScroll();var a={check:{enable:!0},view:{showLine:!1,showIcon:!0,dblClickExpand:!1,selectedMulti:!1},data:{simpleData:{enable:!0}},callback:{onClick:function(e,a,n){$.fn.zTree.getZTreeObj("levelLinkageTree").expandNode(n)},onCheck:function(e,a){var n=$.fn.zTree.getZTreeObj("levelLinkageTree"),i=n.getCheckedNodes(!0),l=n.getCheckedNodes(!1);$("#tree_panel").empty();for(var t=0;t<i.length;t++)3==i[t].levels&&$("#tree_panel").append("<li data-id="+i[t].id+">"+i[t].name+"</li>");for(var o=0;o<l.length;o++)$("#tree_panel li").each(function(){$(this).attr("data-id")==l[o].id&&$(this).remove()})}}},n=e.Data,i=$("#levelLinkageTree");if($.fn.zTree.init(i,a,n,"RoleMenu"),initId)for(var l=$.fn.zTree.getZTreeObj("levelLinkageTree"),t=0;t<initId.length;t++){$("#tree_panel").append("<li data-id="+initId[t].id+">"+initId[t].name+"</li>");var o=l.getNodeByParam("id",initId[t].id);l.checkNode(o,!0,!0)}$("#eosDialogLevelLinkageComfirn").click(function(){for(var e=[],a=0;a<$("#tree_panel li").length;a++)e.push($("#tree_panel li").eq(a).attr("data-id"));$(selectEle).html($("#tree_panel").html()),$("#eosDialogLevelLinkage").remove()}),$("#eosDialogLevelLinkage .cancel").click(function(){$("#eosDialogLevelLinkage").remove()}),callback&&callback()}})};